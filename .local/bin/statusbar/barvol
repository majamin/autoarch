#!/bin/sh

# First line:  pulse
# Second line: alsa only
# I'm adding this option because I'm experimenting
# with JACK which doesn't play nice with Pulse.

volstat="$(pactl list sinks)"
#volstat="$(amixer get Master)"

echo "$volstat" | grep -q "Mute: yes" && printf "\\n" && exit
#[[ -n $(echo $volstat | grep "\[off\]") ]] && printf "\\n" && exit

vol="$(echo "$volstat" | grep '^[[:space:]]Volume:' | sed "s,.* \([0-9]\+\)%.*,\1,;1q")"
#vol=$(amixer sget Master | grep -oP "(?<=\[)\d+")

# both options
printf "%s %s%%\\n" "" "$vol"
