#!/bin/sh

file="$HOME/.local/src/dwm/config.def.h"

MODKEY=$(grep "(?<=#define MODKEY ).+" -Po $file)

case $MODKEY in
	"Mod1Mask")	MODKEY="Alt";;
	"Mod4Mask")	MODKEY="Super";;
	*)		;;
esac

cat "$file" |
	grep -A 100 -P "static Key" |
	grep -P "\t{ MODKEY" |
	sed 's/\t//g' |
	sed 's/^{ //g' |
	sed 's/|/ + /g' | 
	sed 's/ \+/ /g' |
	sed 's/XK_//g' | 
	sed 's/ShiftMask/Shift/g' |
	sed "s/MODKEY/${MODKEY}/g" |
	sed 's/,/ +/' |
	awk -F, '{print $1 $4}' |
	sed 's/\/\//\t\t/g'
